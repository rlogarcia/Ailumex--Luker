<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Login Benglish -->
    <template id="portal_student_login" name="Benglish Login" inherit_id="web.login">
        <xpath expr="//t[@t-call='web.login_layout']" position="replace">
            <t t-call="web.frontend_layout">
                <t t-set="html_data" t-value="{'style': 'height: 100%;'}"/>
                <t t-set="body_classname" t-value="'o-bl-body'"/>
                <t t-set="no_header" t-value="True"/>
                <t t-set="no_footer" t-value="True"/>

                <section class="o-bl-wrapper">
                    <div class="o-bl-ornament" aria-hidden="true" style="top: 22px; left: -40px;"></div>
                    <div class="o-bl-ornament" aria-hidden="true" style="bottom: -20px; right: 80px;"></div>
                    <div class="o-bl-left">
                        <div class="o-bl-identity">
                            <img class="o-bl-logo" src="/portal_student/static/src/img/benglish_logo_nav.png" alt="B English"/>
                            <div>
                                <p class="o-bl-eyebrow">Te damos la bienvenida a</p>
                                <h1 class="o-bl-title">Benglish</h1>
                                <p class="o-bl-tagline">
                                    Ingresa con tu cuenta.
                                </p>
                            </div>
                        </div>

                        <div class="o-bl-feature-grid">
                            <div class="o-bl-feature">
                                <div class="o-bl-icon green" aria-hidden="true"><i class="fa fa-lightbulb-o"/></div>
                                <h3>Desarrollo práctico</h3>
                                <p>
                                    Olvídate del sistema de enseñanza tradicional. En Benglish, estudiarás con un enfoque
                                    en la aplicación del idioma en la vida diaria, con seguimiento personalizado de los
                                    profesores y retroalimentación en tiempo real.
                                </p>
                            </div>
                            <div class="o-bl-feature">
                                <div class="o-bl-icon blue" aria-hidden="true"><i class="fa fa-sitemap"/></div>
                                <h3>Sistema de niveles</h3>
                                <p>
                                    Contamos con tres niveles de estudio que abarcan desde lo esencial a lo avanzado.
                                    Estos niveles están diseñados para mejorar y potenciar tus habilidades de escucha,
                                    habla, lectura y escritura en inglés.
                                </p>
                            </div>
                            <div class="o-bl-feature">
                                <div class="o-bl-icon orange" aria-hidden="true"><i class="fa fa-comments"/></div>
                                <h3>Clases dinámicas</h3>
                                <p>
                                    Con Benglish, estudiarás de manera divertida a través de actividades lúdicas como
                                    debates, juegos de rol y simulaciones de la vida real. Estas dinámicas te ayudarán a
                                    adquirir los conocimientos de forma amigable y efectiva.
                                </p>
                            </div>
                        </div>
                    </div>

                    <div class="o-bl-right">
                        <div class="o-bl-card">
                            <div class="o-bl-card-head">
                                <div>
                                    <h2>Ingresa a tu cuenta</h2>
                                    <p class="o-bl-subtitle">Sigue avanzando con Benglish</p>
                                </div>
                                <img class="o-bl-badge" src="/portal_student/static/src/img/benglish_logo_nav.png" alt="B English"/>
                            </div>

                            <owl-component t-if="not login" name="web.user_switch"/>

                            <t t-if="error">
                                <p class="alert alert-danger" role="alert">
                                    <t t-esc="error"/>
                                </p>
                            </t>
                            <t t-if="message">
                                <p class="alert alert-success" role="status">
                                    <t t-esc="message"/>
                                </p>
                            </t>

                            <form class="o-bl-form oe_login_form" id="o-bl-login-form" role="form" t-attf-action="/web/login" method="post" onsubmit="this.action = '/web/login' + location.hash">
                                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                                <input type="hidden" name="type" value="password"/>
                                <input type="hidden" name="redirect" t-att-value="redirect"/>

                                <div class="o-bl-field" t-if="databases and len(databases) &gt; 1">
                                    <label for="db" class="o-bl-label">Base de datos</label>
                                    <div class="o-bl-input-group">
                                        <input type="text" name="db" t-att-value="request.db" id="db" class="o-bl-input" required="required" readonly="readonly"/>
                                        <a role="button" href="/web/database/selector" class="o-bl-button-ghost">Seleccionar <i class="fa fa-database" aria-hidden="true"/></a>
                                    </div>
                                </div>

                                <div class="o-bl-field">
                                    <label for="login" class="o-bl-label">Correo electrónico o documento</label>
                                    <input type="text" placeholder="Correo electrónico o documento" name="login" t-att-value="login" id="login" class="o-bl-input" required="required" autocapitalize="off" autocomplete="username"/>
                                </div>

                                <div class="o-bl-field">
                                    <label for="password" class="o-bl-label">Contraseña</label>
                                    <input type="password" placeholder="Contraseña" name="password" id="password" class="o-bl-input" required="required" autocomplete="current-password" t-att-autofocus="'autofocus' if login else None" maxlength="4096"/>
                                </div>

                                <div class="o-bl-actions">
                                    <button type="submit" class="o-bl-btn-primary">Ingresar</button>
                                    <t t-if="debug">
                                        <button type="submit" name="redirect" value="/web/become" class="o-bl-btn-link">Ingresar como superusuario</button>
                                    </t>
                                </div>

                                <div style="text-align: center; margin-top: 16px;">
                                    <a href="#" id="forgot-password-link" style="color: #007bff; text-decoration: none; font-size: 14px;">¿Olvidaste tu contraseña?</a>
                                </div>

                                <div class="o_login_auth"/>
                            </form>

                            <t t-if="not disable_footer">
                                <div class="o-bl-footer">
                                    <a class="o-bl-footer-link" href="https://www.odoo.com?utm_source=db&amp;utm_medium=auth" target="_blank">Powered by Odoo</a>
                                    <div class="o-bl-footer-note" style="font-size:11px; color:#667; margin-top:8px; line-height:1.2;">
                                        Desarrollado por AiLumex S.A.S · Innovación tecnológica con estándares de seguridad y protección de datos · Política de Tratamiento de Datos | <a href="https://ailumex.com/" target="_blank" rel="noopener">Términos y Condiciones</a>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>

                    <div id="password-reset-modal" class="benglish-modal" style="display: none;">
                        <div class="benglish-modal-overlay"></div>
                        <div class="benglish-modal-content">
                            <div class="benglish-modal-header">
                                <h3 class="benglish-modal-title"><i class="fa fa-key"></i> Recuperar Contraseña</h3>
                                <button type="button" class="benglish-modal-close" id="close-modal-btn"><i class="fa fa-times"></i></button>
                            </div>
                            <div class="benglish-modal-body">
                                <div class="benglish-stepper">
                                    <div class="benglish-step active" data-step="1">
                                        <div class="benglish-step-circle">1</div>
                                        <span class="benglish-step-label">Identificación</span>
                                    </div>
                                    <div class="benglish-step-line"></div>
                                    <div class="benglish-step" data-step="2">
                                        <div class="benglish-step-circle">2</div>
                                        <span class="benglish-step-label">Verificación</span>
                                    </div>
                                    <div class="benglish-step-line"></div>
                                    <div class="benglish-step" data-step="3">
                                        <div class="benglish-step-circle">3</div>
                                        <span class="benglish-step-label">Nueva Contraseña</span>
                                    </div>
                                </div>
                                <div id="step-1" class="benglish-step-content active">
                                    <p class="benglish-step-description">Ingresa tu número de identificación para recibir un código de verificación.</p>
                                    <form id="request-otp-form">
                                        <div class="benglish-form-group">
                                            <label for="identification-number">Número de Identificación</label>
                                            <input type="text" id="identification-number" name="identification" class="benglish-form-control" placeholder="Ej: 1234567890" required="required" autocomplete="off"/>
                                        </div>
                                        <div id="step-1-error" class="benglish-error-message" style="display: none;">
                                            <i class="fa fa-exclamation-circle"></i> <span id="step-1-error-text"></span>
                                        </div>
                                        <div id="email-hint" class="benglish-info-message" style="display: none;">
                                            <i class="fa fa-envelope"></i> <span id="email-hint-text"></span>
                                        </div>
                                        <div class="benglish-form-actions">
                                            <button type="submit" class="benglish-btn benglish-btn-primary" id="send-code-btn"><i class="fa fa-paper-plane"></i> Enviar Código</button>
                                            <button type="button" class="benglish-btn benglish-btn-secondary" id="cancel-step-1-btn">Cancelar</button>
                                        </div>
                                    </form>
                                </div>
                                <div id="step-2" class="benglish-step-content">
                                    <p class="benglish-step-description">Ingresa el código de 6 dígitos que enviamos a <span id="email-display" style="font-weight: 600;"></span></p>
                                    <form id="verify-otp-form">
                                        <div class="benglish-form-group">
                                            <label for="otp-code">Código de Verificación</label>
                                            <input type="text" id="otp-code" name="otp_code" class="benglish-form-control benglish-otp-input" placeholder="000000" maxlength="6" required="required" autocomplete="off"/>
                                            <small class="benglish-form-hint">El código es válido por 10 minutos</small>
                                        </div>
                                        <div id="cooldown-timer" class="benglish-cooldown-message" style="display: none;">
                                            <i class="fa fa-clock-o"></i> Espera <span id="cooldown-seconds">60</span> segundos para reenviar
                                        </div>
                                        <div id="step-2-error" class="benglish-error-message" style="display: none;">
                                            <i class="fa fa-exclamation-circle"></i> <span id="step-2-error-text"></span>
                                        </div>
                                        <div class="benglish-form-actions">
                                            <button type="submit" class="benglish-btn benglish-btn-primary" id="verify-code-btn"><i class="fa fa-check"></i> Verificar Código</button>
                                            <button type="button" class="benglish-btn benglish-btn-secondary" id="back-to-step-1-btn"><i class="fa fa-arrow-left"></i> Volver</button>
                                            <button type="button" class="benglish-btn benglish-btn-link" id="resend-code-btn"><i class="fa fa-refresh"></i> Reenviar código</button>
                                        </div>
                                    </form>
                                </div>
                                <div id="step-3" class="benglish-step-content">
                                    <p class="benglish-step-description">Crea una contraseña segura para tu cuenta.</p>
                                    <form id="reset-password-form">
                                        <div class="benglish-form-group">
                                            <label for="new-password">Nueva Contraseña</label>
                                            <div class="benglish-password-wrapper">
                                                <input type="password" id="new-password" name="new_password" class="benglish-form-control" placeholder="Mínimo 8 caracteres" minlength="8" required="required" autocomplete="new-password"/>
                                                <button type="button" class="benglish-password-toggle" data-target="new-password"><i class="fa fa-eye"></i></button>
                                            </div>
                                            <div id="password-strength" class="benglish-password-strength" style="display: none;">
                                                <div class="benglish-strength-bar">
                                                    <div id="strength-fill" class="benglish-strength-fill"></div>
                                                </div>
                                                <span id="strength-text" class="benglish-strength-text"></span>
                                            </div>
                                            <small class="benglish-form-hint">Usa al menos 8 caracteres con una combinación de letras, números y símbolos</small>
                                        </div>
                                        <div class="benglish-form-group">
                                            <label for="confirm-password">Confirmar Contraseña</label>
                                            <div class="benglish-password-wrapper">
                                                <input type="password" id="confirm-password" name="confirm_password" class="benglish-form-control" placeholder="Repite tu contraseña" minlength="8" required="required" autocomplete="new-password"/>
                                                <button type="button" class="benglish-password-toggle" data-target="confirm-password"><i class="fa fa-eye"></i></button>
                                            </div>
                                        </div>
                                        <div id="step-3-error" class="benglish-error-message" style="display: none;">
                                            <i class="fa fa-exclamation-circle"></i> <span id="step-3-error-text"></span>
                                        </div>
                                        <div class="benglish-form-actions">
                                            <button type="submit" class="benglish-btn benglish-btn-primary" id="update-password-btn"><i class="fa fa-save"></i> Actualizar Contraseña</button>
                                            <button type="button" class="benglish-btn benglish-btn-secondary" id="cancel-step-3-btn">Cancelar</button>
                                        </div>
                                    </form>
                                </div>
                                <div id="step-success" class="benglish-step-content">
                                    <div class="benglish-success-icon"><i class="fa fa-check-circle"></i></div>
                                    <h3 class="benglish-success-title">¡Contraseña actualizada!</h3>
                                    <p class="benglish-success-description">Tu contraseña ha sido cambiada exitosamente. Ya puedes iniciar sesión con tu nueva contraseña.</p>
                                    <div class="benglish-form-actions">
                                        <button type="button" class="benglish-btn benglish-btn-primary" id="close-success-btn"><i class="fa fa-sign-in"></i> Ir a Iniciar Sesión</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <script type="text/javascript" src="/benglish_academy/static/src/js/password_reset.js?v=2.0"></script>
                    <link rel="stylesheet" type="text/css" href="/benglish_academy/static/src/css/password_reset.css?v=2.0"/>

                </section>
            </t>
        </xpath>
    </template>
</odoo>
