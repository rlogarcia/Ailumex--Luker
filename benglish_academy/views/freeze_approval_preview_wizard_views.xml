<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!-- Preview de ajuste de fechas -->

    <record id="view_freeze_approval_preview_wizard_form" model="ir.ui.view">
        <field name="name">benglish.freeze.approval.preview.wizard.form</field>
        <field name="model">benglish.freeze.approval.preview.wizard</field>
        <field name="arch" type="xml">
            <form string="Preview de Aprobación de Congelamiento">
                <sheet>
                    <div class="alert alert-info" role="alert">
                        <strong><i class="fa fa-info-circle"/> Información:</strong>
                        Revise cuidadosamente los cambios que se aplicarán antes de aprobar el congelamiento.
                    </div>
                    
                    <!-- Alertas -->
                    <div class="alert alert-warning" role="alert" invisible="not alertas">
                        <strong><i class="fa fa-exclamation-triangle"/> Alertas:</strong>
                        <field name="alertas" nolabel="1" readonly="1"/>
                    </div>
                    
                    <group>
                        <group string="Información del Congelamiento">
                            <field name="freeze_period_id" readonly="1" string="Período"/>
                            <field name="student_id" readonly="1" string="Estudiante"/>
                            <field name="enrollment_id" readonly="1" string="Matrícula"/>
                        </group>
                        <group string="Fechas del Congelamiento">
                            <field name="fecha_inicio" readonly="1" string="Fecha Inicio"/>
                            <field name="fecha_fin" readonly="1" string="Fecha Fin"/>
                            <field name="dias_congelamiento" readonly="1" string="Días de Congelamiento"/>
                        </group>
                    </group>
                    
                    <group>
                        <group string="Ajuste de Matrícula">
                            <field name="fecha_fin_actual" readonly="1" string="Fecha Fin Actual"/>
                            <field name="fecha_fin_nueva" readonly="1" string="Nueva Fecha Fin"/>
                            <field name="dias_extension" readonly="1" string="Días de Extensión"/>
                        </group>
                        <group string="Estadísticas de Congelamiento">
                            <field name="dias_usados_previamente" readonly="1" string="Días Usados Previamente"/>
                            <field name="dias_usados_despues" readonly="1" string="Días Usados Después"/>
                            <field name="dias_disponibles_despues" readonly="1" string="Días Disponibles"/>
                        </group>
                    </group>
                    
                    <!-- Validación -->
                    <group invisible="not mensaje_validacion">
                        <field name="mensaje_validacion" nolabel="1" readonly="1"/>
                    </group>
                    
                    <separator/>
                    
                    <!-- Confirmación -->
                    <group>
                        <field name="confirmar_cambios" string="He revisado y confirmo los cambios"/>
                    </group>
                    
                    <footer>
                        <button name="action_confirmar_aprobacion" 
                            string="Aprobar Congelamiento" 
                            type="object" 
                            class="btn-primary"
                            invisible="not confirmar_cambios"/>
                        <button string="Cancelar" class="btn-secondary" special="cancel"/>
                    </footer>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_freeze_approval_preview_wizard" model="ir.actions.act_window">
        <field name="name">Preview de Aprobación</field>
        <field name="res_model">benglish.freeze.approval.preview.wizard</field>
        <field name="view_mode">form</field>
        <field name="target">new</field>
    </record>

</odoo>
