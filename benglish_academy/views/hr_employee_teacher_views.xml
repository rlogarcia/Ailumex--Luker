<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ========================================== -->
    <!-- HERENCIA DE VISTAS DE HR.EMPLOYEE          -->
    <!-- Agrega campos de docencia                  -->
    <!-- ========================================== -->

    <!-- Herencia de formulario de empleado -->
    <record id="view_employee_form_inherit_teacher" model="ir.ui.view">
        <field name="name">hr.employee.form.inherit.teacher</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_form" />
        <field name="arch" type="xml">

            <!-- Agregar checkbox "Es Docente" después del campo de trabajo -->
            <xpath expr="//field[@name='work_location_id']" position="after">
                <field name="is_teacher" widget="boolean_toggle" />
                <field name="meeting_platform"
                    required="is_teacher"
                    readonly="not is_teacher"
                    invisible="not is_teacher" />
                <field name="meeting_link"
                    widget="url"
                    required="is_teacher"
                    readonly="not is_teacher"
                    placeholder="https://meet.google.com/abc-defg-hij"
                    invisible="not is_teacher" />
                <field name="meeting_id"
                    required="is_teacher"
                    readonly="not is_teacher"
                    placeholder="Código o ID de la sala"
                    invisible="not is_teacher" />
            </xpath>
        </field>
    </record>

    <!-- Herencia de vista de árbol (list) -->
    <record id="view_employee_tree_inherit_teacher" model="ir.ui.view">
        <field name="name">hr.employee.tree.inherit.teacher</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_tree" />
        <field name="arch" type="xml">

            <!-- Agregar columna "Docente" -->
            <xpath expr="//field[@name='job_id']" position="after">
                <field name="is_teacher" widget="boolean_toggle" optional="show" />
            </xpath>

        </field>
    </record>

    <!-- Herencia de búsqueda/filtros -->
    <record id="view_employee_filter_inherit_teacher" model="ir.ui.view">
        <field name="name">hr.employee.search.inherit.teacher</field>
        <field name="model">hr.employee</field>
        <field name="inherit_id" ref="hr.view_employee_filter" />
        <field name="arch" type="xml">

            <!-- Agregar filtros específicos para docentes -->
            <xpath expr="//filter[@name='inactive']" position="after">
                <separator />
                <filter string="Docentes"
                    name="is_teacher"
                    domain="[('is_teacher', '=', True)]"
                    help="Mostrar solo empleados marcados como docentes" />
                <filter string="No Docentes"
                    name="not_teacher"
                    domain="[('is_teacher', '=', False)]"
                    help="Mostrar solo empleados que NO son docentes" />
            </xpath>

            <!-- Agregar agrupación por docente -->
            <xpath expr="//filter[@name='group_manager']" position="after">
                <filter string="Docente"
                    name="group_is_teacher"
                    context="{'group_by': 'is_teacher'}" />
            </xpath>

        </field>
    </record>

    <!-- ========================================== -->
    <!-- ACCIÓN ESPECÍFICA PARA DOCENTES            -->
    <!-- ========================================== 

    <record id="action_hr_employee_teachers" model="ir.actions.act_window">
        <field name="name">Docentes</field>
        <field name="res_model">hr.employee</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('is_teacher', '=', True)]</field>
        <field name="context">{
            'default_is_teacher': True,
            'search_default_is_teacher': 1,
            }</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Crea tu primer docente
            </p>
            <p> Los docentes son empleados que pueden ser asignados a clases.<br /> Marca el
                checkbox "¿Es Docente?" y completa los datos de reuniones. </p>
        </field>
    </record>-->

    <!-- Menú para acceso rápido a docentes 
    <menuitem id="menu_hr_teachers"
        name="Docentes"
        parent="hr.menu_hr_employee_payroll"
        action="action_hr_employee_teachers"
        sequence="5" />-->

</odoo>