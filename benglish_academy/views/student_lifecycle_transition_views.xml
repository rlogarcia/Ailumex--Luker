<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- List View -->
    <record id="view_student_lifecycle_transition_list" model="ir.ui.view">
        <field name="name">benglish.student.lifecycle.transition.list</field>
        <field name="model">benglish.student.lifecycle.transition</field>
        <field name="arch" type="xml">
            <list string="Transiciones de Estado del Estudiante (Ciclo de Vida)">
                <field name="sequence" widget="handle"/>
                <field name="state_from" string="Estado Origen"/>
                <field name="state_to" string="Estado Destino"/>
                <field name="profile_state_id" string="Estado de Perfil"/>
                <field name="requires_reason" string="Req. Motivo"/>
                <field name="active" string="Activa"/>
            </list>
        </field>
    </record>

    <!-- Form View -->
    <record id="view_student_lifecycle_transition_form" model="ir.ui.view">
        <field name="name">benglish.student.lifecycle.transition.form</field>
        <field name="model">benglish.student.lifecycle.transition</field>
        <field name="arch" type="xml">
            <form string="Configuración de Transición">
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <span><field name="state_from" readonly="1" class="oe_inline"/></span>
                            <span class="mx-2">→</span>
                            <span><field name="state_to" readonly="1" class="oe_inline"/></span>
                        </h1>
                    </div>
                    <group>
                        <group string="Estados">
                            <field name="state_from" string="Estado Origen"/>
                            <field name="state_to" string="Estado Destino"/>
                            <field name="sequence" string="Secuencia"/>
                            <field name="active" string="Activa"/>
                            <field name="profile_state_id" string="Estado de Perfil"/>
                        </group>
                        <group string="Requisitos">
                            <field name="requires_reason" string="Requiere Motivo"/>
                        </group>
                    </group>
                    <group>
                        <group string="Permisos">
                            <field name="group_ids" string="Grupos Permitidos"
                                widget="many2many_tags"
                                options="{'no_create': True}"/>
                        </group>
                        <group string="Mensajes">
                            <field name="confirmation_message" string="Mensaje de Confirmación"/>
                        </group>
                    </group>
                    <group string="Descripción" invisible="not description">
                        <field name="description" nolabel="1"/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- Search View -->
    <record id="view_student_lifecycle_transition_search" model="ir.ui.view">
        <field name="name">benglish.student.lifecycle.transition.search</field>
        <field name="model">benglish.student.lifecycle.transition</field>
        <field name="arch" type="xml">
            <search string="Buscar Transiciones">
                <field name="state_from" string="Estado Origen"/>
                <field name="state_to" string="Estado Destino"/>
                <separator/>
                <filter name="filter_active" string="Activas" domain="[('active', '=', True)]"/>
                <filter name="filter_inactive" string="Inactivas" domain="[('active', '=', False)]"/>
                <separator/>
                <filter name="filter_requires_reason" string="Requiere Motivo" domain="[('requires_reason', '=', True)]"/>
                <separator/>
                <group expand="0" string="Agrupar por">
                    <filter name="group_origen" string="Estado Origen" context="{'group_by': 'state_from'}"/>
                    <filter name="group_destino" string="Estado Destino" context="{'group_by': 'state_to'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- Action -->
    <record id="action_student_lifecycle_transition" model="ir.actions.act_window">
        <field name="name">Transiciones de Estado del Estudiante (Ciclo de Vida)</field>
        <field name="res_model">benglish.student.lifecycle.transition</field>
        <field name="view_mode">list,form</field>
        <field name="search_view_id" ref="view_student_lifecycle_transition_search"/>
        <field name="context">{'search_default_filter_active': 1}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">
                Configure las transiciones válidas del estado del estudiante.
            </p>
            <p>
                Defina qué cambios de estado están permitidos y si requieren motivo.
            </p>
        </field>
    </record>

</odoo>
